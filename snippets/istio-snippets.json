{
    "DestinationRule" :{
        "scope": "yml, yaml",
        "prefix": "DestinationRule",
        "description": "Simple DestinationRule",
		"body": [
			"# See more at https://istio.io/docs/reference/config/networking/destination-rule/",
			"apiVersion: networking.istio.io/v1alpha3",
			"kind: DestinationRule",
			"metadata:",
			"  name: $1",
			"spec:",
			"  host: $1",
			"  subsets:",
			"  - name: ${3:v1}",
			"    labels:",
			"      ${2:version}: ${3:v1}",
			"  - name: ${4:v2}",
			"    labels:",
			"      ${2:version}: ${4:v2}"
		]
	},
	"VirtualService" :{
        "scope": "yml, yaml",
        "prefix": "VirtualService",
        "description": "Simple VirtualService",
		"body": [
			"# See more at https://istio.io/docs/reference/config/networking/virtual-service/",
			"apiVersion: networking.istio.io/v1alpha3",
			"kind: VirtualService",
			"metadata:",
			"  name: $1",
			"spec:",
			"  hosts:",
			"  - $1",
			"  http:",
			"  - route:",
			"    - destination:",
			"        host: $1",
			"        subset: ${2:v1}"
		]
	},
    "VirtualService-Canary": {
        "scope": "yml, yaml",
        "prefix": "VirtualService-Canary",
        "description": "Canary Deployments VirtualService",
        "body": [
            "# See more at https://istio.io/blog/2017/0.1-canary/",
            "apiVersion: networking.istio.io/v1alpha3",
            "kind: VirtualService",
            "metadata:",
            "  name: $1",
            "spec:",
            "  hosts:",
            "  - $1",
            "  http:",
            "  - route:",
            "    - destination:",
            "        host: $1",
            "        subset: ${2:v1}",
            "      weight: ${3:90}",
            "    - destination:",
            "        host: $1",
            "        subset: ${4:v2}",
            "      weight: ${5:10}"
        ]
	},
    "VirtualService-Mirroring": {
        "scope": "yml, yaml",
        "prefix": "VirtualService-Mirroring",
        "description": "Mirroring Traffic VirtualService",
        "body": [
            "# See more at https://istio.io/docs/tasks/traffic-management/mirroring/",
            "apiVersion: networking.istio.io/v1alpha3",
            "kind: VirtualService",
            "metadata:",
            "  name: $1",
            "spec:",
            "  hosts:",
            "  - $1",
            "  http:",
            "  - route:",
            "    - destination:",
            "        host: $1",
			"        subset: ${2:v1}",
			"      weight: ${3:100}",
            "    mirror:",
            "      host: $1",
			"      subset: ${4:v2}",
			"    mirror_percent: ${5:100}"
        ]
	},
    "VirtualService-Fault-Injection-HTTPStatus": {
        "scope": "yml, yaml",
        "prefix": "VirtualService-Fault-Injection-HTTPStatus",
        "description": "Fault Injection (HTTPStatus) VirtualService",
        "body": [
		  "# See more at https://istio.io/docs/tasks/traffic-management/fault-injection/",
          "apiVersion: networking.istio.io/v1alpha3",
          "kind: VirtualService",
          "metadata:",
          "  name: $1",
          "spec:",
          "  hosts:",
          "  - $1",
          "  http:",
          "  - fault:",
          "      abort:",
          "        httpStatus: ${2:500}",
          "        percentage:",
          "          value: ${3:100}",
          "    route:",
          "    - destination:",
          "        host: $1",
          "        subset: ${4:v1}",
          "  - route:",
          "    - destination:",
          "        host: $1",
          "        subset: ${4:v1}"
        ]
	},
    "VirtualService-Fault-Injection-Delay": {
        "scope": "yml, yaml",
        "prefix": "VirtualService-Fault-Injection-Delay",
        "description": "Fault Injection (Delay) VirtualService",
        "body": [
		  "# See more at https://istio.io/docs/tasks/traffic-management/fault-injection/",
          "apiVersion: networking.istio.io/v1alpha3",
          "kind: VirtualService",
          "metadata:",
          "  name: $1",
          "spec:",
          "  hosts:",
          "  - $1",
          "  http:",
          "  - fault:",
          "      delay:",
          "        fixedDelay: ${2:7s}",
          "        percentage:",
		  "          value: ${3:100}",
		  "    match:",
		  "    - headers:",
		  "        end-user:",
		  "          exact: ${4:jason}",
          "    route:",
          "    - destination:",
          "        host: $1",
          "        subset: ${5:v1}",
          "  - route:",
          "    - destination:",
          "        host: $1",
          "        subset: ${5:v1}"
        ]
    },
	"ServiceEntry" :{
        "scope": "yml, yaml",
        "prefix": "ServiceEntry",
        "description": "Simple ServiceEntry",
		"body": [
			"# See more at https://istio.io/docs/reference/config/networking/service-entry/",
			"apiVersion: networking.istio.io/v1alpha3",
			"kind: ServiceEntry",
			"metadata:",
			"  name: $1",
			"spec:",
			"  hosts:",
			"  - $1.com",
			"  ports:",
			"  - number: 80",
			"    name: http",
			"    protocol: HTTP",
			"  - number: 443",
			"    name: https",
			"    protocol: HTTPS"
		]
	},
	"Gateway" :{
        "scope": "yml, yaml",
        "prefix": "Gateway",
        "description": "Simple Gateway",
		"body": [
			"# See more at https://istio.io/docs/reference/config/networking/gateway/",
			"apiVersion: networking.istio.io/v1alpha3",
			"kind: Gateway",
			"metadata:",
			"  name: $1-gateway",
			"spec:",
			"  selector:",
			"    istio: ingressgateway",
			"  servers:",
			"  - port:",
			"      number: 80",
			"      name: http",
			"      protocol: HTTP",
			"    hosts:",
			"    - '*/*.$1.com'",
			"    - '*/$1.com'",
			"  - port:",
			"      number: 443",
			"      name: https",
			"      protocol: HTTPS",
			"    hosts:",
			"    - '*/*.$1.com'",
			"    - '*/$1.com'",
			"    tls:",
			"      mode: SIMPLE",
			"      serverCertificate: /etc/istio/ingressgateway-certs/$1-io-crt.pem",
			"      privateKey: /etc/istio/ingressgateway-certs/$1-io-key.pem"
		]
    }
}